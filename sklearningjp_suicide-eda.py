import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
%matplotlib inline
import seaborn as sns
df = pd.read_csv('../input/suicide-rates-overview-1985-to-2016/master.csv')
df.head()
df.info()
df['country'].nunique()
df.duplicated().value_counts()
df.columns
df.isnull().sum()
df['HDI for year'].unique()
df['HDI for year'].mean()
df_1 = df.fillna(df.mean())
df_1.isnull().sum()
df_j = df.query('country == "Japan"')
df_j.head()
df1 = pd.DataFrame(df_1.groupby(['country'])['suicides_no'].sum())
df1.head()
df1['pop_per'] = df.groupby(['country'])['population'].mean()
df1['gdp_per'] = df.groupby(['country'])['gdp_per_capita ($)'].mean()
df1['sui_100k'] = df.groupby(['country'])['suicides/100k pop'].mean()
df1['hdi'] = df.groupby(['country'])['HDI for year'].mean()

df1.head()
df1.describe()
df1.plot(kind='scatter', x=u'gdp_per', y=u'suicides_no')
df1.plot(kind='scatter', x=u'hdi', y=u'suicides_no')
df1.query('suicides_no > 1000000')
sns.regplot(x='pop_per', y='suicides_no', data=df1)
df1.query('pop_per > 5000000')
sns.jointplot(x='pop_per', y='suicides_no', data=df1)
sns.pairplot(df1)
corr = df1.corr()
plt.figure(figsize=(20,15))
sns.heatmap(corr, annot = True)
plt.show()
df['year'].unique()
df2 = pd.DataFrame(df.groupby(['country', 'year'])['suicides_no'].sum())
df2.head()
df3 = pd.DataFrame(df2.unstack())
df3.head()
df4 = pd.DataFrame(df.groupby(['year', 'country'])['suicides_no'].sum())
df4.head()
df5 = pd.DataFrame(df4.unstack(level='country'))
df5.head()
df_gene = pd.DataFrame(df.groupby(['year', 'generation'])['suicides_no'].sum())
df_gene.head()
df_geneT = pd.DataFrame(df_gene.unstack())
df_geneT.head()
plt.figure(figsize=(20, 10), dpi=50)
df_geneT.plot()
plt.legend(bbox_to_anchor=(0, -0.1), loc='upper left', borderaxespad=0, fontsize=10)
df_geneT.plot.barh(stacked=True, alpha=0.5)
plt.legend(bbox_to_anchor=(0, -0.1), loc='upper left', borderaxespad=0, fontsize=10)
df_j.head()
df_j.isnull().sum()
df_j = df_j.fillna(df_j.mean())
df_j.isnull().sum()
x = df_j.year
y = df_j.suicides_no
plt.bar(x, y)
df_jgene = pd.DataFrame(df_j.groupby(['year', 'generation'])['suicides_no'].sum())
df_jgene.head()
df_jgeneT = pd.DataFrame(df_jgene.unstack())
df_jgeneT.head()
plt.figure(figsize=(20, 10), dpi=50)
df_jgeneT.plot()
plt.legend(bbox_to_anchor=(0, -0.1), loc='upper left', borderaxespad=0, fontsize=10)
df_jgeneT.plot.barh(stacked=True, alpha=0.5)
plt.legend(bbox_to_anchor=(0, -0.1), loc='upper left', borderaxespad=0, fontsize=10)