import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns
%matplotlib inline
df = pd.read_csv("../input/montcoalert/911.csv")
df.info()
df.head()
df["zip"].value_counts().head(5)
df["twp"].value_counts().head(5)
df["title"].nunique()
df["Reason"] = df["title"].apply(lambda x: x.split(":")[0])
df.head()
df["Reason"].value_counts()
sns.countplot(x="Reason", data=df)
type(df["timeStamp"][0])
df["timeStamp"] = pd.to_datetime(df["timeStamp"])
df["Hour"] = df["timeStamp"].apply(lambda x: x.hour)
df["Month"] = df["timeStamp"].apply(lambda x: x.month)
df["Day of Week"] = df["timeStamp"].apply(lambda x: x.dayofweek)
df.head()
dmap = {0:'Mon',1:'Tue',2:'Wed',3:'Thu',4:'Fri',5:'Sat',6:'Sun'}
df["Day of Week"] = df["Day of Week"].map(dmap)
df.head()
sns.countplot(x="Day of Week", data=df, hue="Reason")
plt.legend(loc=0)
sns.countplot(x="Month", data=df, hue="Reason")
plt.legend(loc=0)
byMonth = df.groupby("Month").count()
byMonth.head()
byMonth["lat"].plot()
sns.lmplot(x="Month", y="twp", data=byMonth.reset_index())
df["Date"] = df["timeStamp"].apply(lambda x: x.date())
df.head()
df.groupby("Date").count()["lat"].plot()
plt.tight_layout()
df[df["Reason"] == "Traffic"].groupby("Date").count()["lat"].plot()
plt.tight_layout()
plt.title("Traffic")
df[df["Reason"] == "Fire"].groupby("Date").count()["lat"].plot()
plt.tight_layout()
plt.title("Fire")
df[df["Reason"] == "EMS"].groupby("Date").count()["lat"].plot()
plt.tight_layout()
plt.title("EMS")
dayHour = df.groupby(["Day of Week", "Hour"]).count()["Reason"].unstack()
dayHour.head()
plt.figure(figsize=(12,5))
sns.heatmap(dayHour)
sns.clustermap(dayHour)
dayMonth = df.groupby(["Day of Week", "Month"]).count()["Reason"].unstack()
dayMonth.head()
plt.figure(figsize=(12,5))
sns.heatmap(dayMonth)
sns.clustermap(dayMonth)